server:
  ip: 0.0.0.0
  port: 8000
  http_port: 8003
  websocket: ws://101.37.205.115:8000/xiaozhi/v1/
  # OTA: http://101.37.205.115:8003/xiaozhi/ota/
  vision_explain: http://101.37.205.115:8003/mcp/vision/explain
  timezone_offset: +8
  auth:
    enabled: false

# 管理API配置
manager_api:
  enable: false


# 基础配置
delete_audio: true
close_connection_no_voice_time: 120
tts_timeout: 10
enable_wakeup_words_response_cache: true
enable_greeting: true
enable_stop_tts_notify: false
stop_tts_notify_voice: "config/assets/tts_notify.mp3"

exit_commands:
  - "退出"
  - "关闭"


# 唤醒词
wakeup_words:
  - "你好小智"
  - "嘿你好呀"
  - "你好小志"
  - "小爱同学"
  - "你好小鑫"
  - "你好小新"
  - "小美同学"
  - "小龙小龙"
  - "嘿嘿"
  - "小平老师"
  - "小平小平"
  - "你好吗"



# ============================== 模块选择配置 ==============================
selected_module:
  # 语音活动检测
  VAD: SileroVAD
  ASR: FunASR
  LLM: GLM-45
  VLLM: GLM-45V
  TTS: EdgeTTS
  Memory: mem_local_short
  Intent: function_call



# 大语言模型配置
LLM:
  GLM-45:
    type: openai
    model_name: glm-4.5 
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty

  GLM-45-Flash:
    type: openai
    model_name: glm-4.5-flash 
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty

  GLM-45-Air:
    type: openai
    model_name: glm-4.5-air
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty

  GLM-45-X:
    type: openai
    model_name: glm-4.5-x
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty

  GLM-45-AirX:
    type: openai
    model_name: glm-4.5-airx
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty


  ChatGLMLLM:
    type: openai
    model_name: glm-4-flash
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 94279aac8bb94e18baf9d387f31cccfd.aZl3SnT0KaZV0SaK

VLLM:
  ChatGLMVLLM:
    type: openai
    model_name: glm-4v-flash
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty

  GLM-45V:
    type: openai
    model_name: glm-4.5v
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 30700b69faad481297b323f915eab279.NoSgiZPhFiw87qty


  GLM-41V-Thinking-Flash:
    type: openai
    model_name: glm-4.1v-thinking-flash
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 94279aac8bb94e18baf9d387f31cccfd.aZl3SnT0KaZV0SaK




# ============================== VAD配置 ==============================
VAD:
  SileroVAD:
    type: silero
    threshold: 0.5
    threshold_low: 0.3
    model_dir: models/snakers4_silero-vad
    min_silence_duration_ms: 100

  #------------------------------------------------
  # ASR 配置
  #-----------------------------------------------

  FunASR:
    type: fun_local
    model_dir: models/SenseVoiceSmall
    output_dir: tmp/

  SherpaASR:
    type: sherpa_onnx_local
    model_dir: models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17
    model_type: sense_voice

  GLMASR:
    api_key: 86eb2e8ea9374667abf7c3c3aa0bb300.QALCagyJ1UnG7rKG


  # GLM4VoiceASR:
  #   api_key: 86eb2e8ea9374667abf7c3c3aa0bb300.QALCagyJ1UnG7rKG


# ============================== MCP配置 ==============================

mcp_endpoint: ws://8.141.113.229/mcp/ws/?token=0TirUgUVHWMq1uQ_DrTOqP3x0wSGm5Mi1eWFHpkwCk49fau77q-1A8OwpuEb14EUwF5LgNEd3Vc0paKD7U7aQg.Lfvu5sPKUkdqeOMG-_-_y5AzQmhv5mMYv-8Pdn7-txY

# AutoGLM MCP配置
autoglm:
  enabled: true
  base_url: "http://8.141.113.229/mcp/http"
  api_key: "0TirUgUVHWMq1uQ_DrTOqP3x0wSGm5Mi1eWFHpkwCk49fau77q-1A8OwpuEb14EUwF5LgNEd3Vc0paKD7U7aQg.Lfvu5sPKUkdqeOMG-_-_y5AzQmhv5mMYv-8Pdn7-txY"
  name: autoglm_agent
  description: AutoGLM Mobile Automation Agent
  
# ============================== TTS配置 ==============================
TTS:
  EdgeTTS:
    type: edge
    voice: zh-CN-YunxiNeural
    output_dir: tmp/


  # GLM-4 Voice 智谱语音模型
  GLM4Voice:
    type: glm4voice
    model_name: glm-4-voice
    url: https://open.bigmodel.cn/api/paas/v4/
    api_key: 86eb2e8ea9374667abf7c3c3aa0bb300.QALCagyJ1UnG7rKG
    voice_config:
      format: "wav"
      language: "zh"
    output_dir: tmp/

  # # Custom: https://docs.bigmodel.cn/api-reference/%E6%A8%A1%E5%9E%8B-api/%E6%96%87%E6%9C%AC%E8%BD%AC%E8%AF%AD%E9%9F%B3
  # CogTTS:
  #   type: cogtts
  #   method: POST
  #   url: "https://open.bigmodel.cn/api/paas/v4/audio/speech"
  #   headers:
  #     Authorization: "Bearer 94279aac8bb94e18baf9d387f31cccfd.aZl3SnT0KaZV0SaK"
  #     Content-Type: "application/json"
  #   params:
  #     model: "cogtts"
  #     input: "{prompt_text}"
  #     voice: "tongtong"
  #     response_format: "wav"
  #   output_dir: tmp/


  # 文本转语音
  CustomTTS:
    type: custom
    method: POST
    url: "https://open.bigmodel.cn/api/paas/v4/audio/speech"
    headers:
      Authorization: "Bearer <YOUR_ZHIPU_API_KEY>"
      Content-Type: "application/json"
    params:
      model: "cogtts"
      input: "{prompt_text}"
      voice: "tongtong"
      response_format: "wav"
    output_dir: tmp/

# ============================== 记忆配置 ==============================
Memory:
  mem_local_short:
    type: mem_local_short
    llm: GLM-45-Air


# ============================== 意图识别配置 ==============================
Intent:
  nointent:
    type: nointent

  intent_llm:
    type: intent_llm
    llm: GLM-45-X
    functions:
      - get_weather
      - get_news_from_newsnow
      - play_music

  # 函数调用意图识别
  function_call:
    type: function_call
    functions:
      - change_role
      - get_weather
      - get_news_from_newsnow
      - play_music
      - autoglm_control
      - give_talk
